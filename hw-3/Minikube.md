# Minikube

---

Minikube — это инструмент для локального запуска Kubernetes-кластера, который облегчает разработку и тестирование Kubernetes-приложений. Он запускает однозвенный кластер (который включает только одну ноду) на виртуальной машине или в контейнере на вашем компьютере.

### Основные возможности Minikube:
- **Локальное окружение для разработки:** позволяет разрабатывать и тестировать Kubernetes-кластеры и приложения без затрат на облачные сервисы.
- **Легкость в установке и запуске:** один из самых простых способов запустить Kubernetes-кластер.
- **Поддержка различных драйверов виртуализации:** Minikube поддерживает VirtualBox, Docker, KVM, Hyperkit и другие драйверы для запуска кластера.
- **Добавление плагинов и дополнений (addons):** Minikube позволяет легко включать дополнительные функции (например, мониторинг и панель управления).

### Основные команды Minikube

#### Управление кластером
1. **Запуск кластера:**
   ```bash
   minikube start
   ```
   Запускает кластер Minikube с выбранным драйвером виртуализации.

2. **Остановка кластера:**
   ```bash
   minikube stop
   ```
   Останавливает текущий кластер, сохраняя состояние для последующего перезапуска.

3. **Перезагрузка кластера:**
   ```bash
   minikube restart
   ```
   Перезапускает кластер, что полезно для применения новых настроек.

4. **Удаление кластера:**
   ```bash
   minikube delete
   ```
   Полностью удаляет кластер и его данные. 

5. **Просмотр статуса кластера:**
   ```bash
   minikube status
   ```
   Показывает статус ноды, кластера, API-сервера и других компонентов Minikube.

#### Работа с ресурсами Kubernetes
6. **Проверка ресурсов:**
   ```bash
   kubectl get all
   ```
   Выводит все ресурсы в текущем пространстве имен Kubernetes. Это стандартная команда `kubectl`, используемая вместе с Minikube.

7. **Получение информации о ноде Minikube:**
   ```bash
   kubectl get nodes
   ```

#### Управление дополнениями (Addons)
Minikube поддерживает различные аддоны для расширения возможностей кластера.

8. **Список всех доступных аддонов:**
   ```bash
   minikube addons list
   ```

9. **Включение аддона:**
   ```bash
   minikube addons enable <addon-name>
   ```
   Например, чтобы включить `dashboard`, выполните:
   ```bash
   minikube addons enable dashboard
   ```

10. **Отключение аддона:**
    ```bash
    minikube addons disable <addon-name>
    ```

#### Просмотр и отладка приложений
11. **Просмотр Minikube Dashboard:**
    ```bash
    minikube dashboard
    ```
    Открывает веб-интерфейс для управления и мониторинга кластера.

12. **Просмотр логов Minikube:**
    ```bash
    minikube logs
    ```
    Показывает логи ноды Minikube для отладки проблем.

#### Доступ к сервисам
13. **Просмотр IP-адреса кластера:**
    ```bash
    minikube ip
    ```
    Выводит IP-адрес кластера Minikube, что полезно для доступа к приложениям, запущенным в кластере.

14. **Просмотр информации о сервисе:**
    ```bash
    minikube service <service-name> --url
    ```
    Выводит URL для доступа к указанному сервису.

#### Настройки конфигурации
15. **Настройка Minikube:**
    ```bash
    minikube config set <key> <value>
    ```
    Позволяет изменять настройки Minikube, такие как драйвер виртуализации, количество CPU и память.

### Примеры использования
Запуск кластера с дополнительной памятью и CPU:
```bash
minikube start --memory=4096 --cpus=2
```

Открытие Kubernetes Dashboard:
```bash
minikube addons enable dashboard
minikube dashboard
```


## Чтобы удалить все объекты в Minikube, можно использовать следующие команды:

1. **Удаление всех объектов в текущем пространстве имен:**
   ```bash
   kubectl delete all --all
   ```
   Эта команда удалит все ресурсы (Pods, Services, Deployments, ReplicaSets и т.д.) в текущем namespace.

2. **Удаление объектов во всех пространствах имен:**
   ```bash
   kubectl delete all --all --all-namespaces
   ```
   Это удалит все ресурсы во всех пространствах имен Minikube.

3. **Удаление всех Persistent Volume Claims (PVC) и Persistent Volumes (PV):**
   ```bash
   kubectl delete pvc --all --all-namespaces
   kubectl delete pv --all
   ```

4. **Полный сброс Minikube (удаление кластера):**
   Если вам нужно полностью сбросить Minikube и удалить все данные:
   ```bash
   minikube delete
   ```
   Это удалит весь кластер, включая все объекты, конфигурации и данные. После этого Minikube можно заново запустить с `minikube start`.

Эти команды позволяют очистить Minikube на разных уровнях — от удаления только ресурсов до полного сброса кластера.